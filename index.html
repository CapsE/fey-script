<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="water-dark.css">


    <title>Vite App</title>
  </head>
  <body>
    <div id="app">

      <fey-viewer id="viewer">
        ---
        name: Nira
        profession: Monk
        str: 10
        dex: 15
        con: 8
        int: 10
        wis: 14
        cha: 12
        ---
        # Hello World
        How are you doing? Would you like to roll a +5 or mabye 2d6+2?

        s[className][
        Warrior
        Rogue
        Mage
        ]

        Selected class is {{className}}

        #### DnD Stats
        |                |        |        |        |        |        |
        |----------------|--------|--------|--------|--------|--------|
        | i[str]         | i[dex]        | i[con]        | i[int]        | i[wis]        | i[cha]        |
        | {{$mod(str)}}  | {{$mod(dex)}} | {{$mod(con)}} | {{$mod(int)}} | {{$mod(wis)}} | {{$mod(cha)}} |

        :::if str > 10
        This character is quite strong. It's strength is {{str}}
        :::

        ## Tabs
        This new addition allows it to group and filter information on the fly. This will likely be used to
        replace the current tab management in Fey-Gate to make content easier copy+pasteable
        |-- Tab One ---
        |
        | [[> fireball ]]
        |
        |-- Tab Two ---
        |
        | [[> test.yml ]]
        |
        |---

        [[
          ## Card with some content
          That is looking very nice.
          And can roll a +5 with no problem.
        ]]

        # Headline
        And some more text just to make sure... might be a weird issue

      </fey-viewer>
    </div>
    <script type="module" src="/src/main.js"></script>
    <script>
      const viewer = document.getElementById('viewer');
      viewer.resolveImports = resolveImport;
      viewer.addEventListener('onDiceRoll', (e) => {
        alert(e.detail.result.output);
      });

      function resolveImport(path) {
        console.log('Resolving', path);
        const importables = {
          'doubleImport': `## Double import
          this little thing will import another one.
          {{> fireball }}`,
          'fireball': `#### Fireball
        ![fireball](fireball.png)

        *3rd-level evocation*

        **Casting Time:** 1 action

        **Range:** 150 feet

        **Components:** V, S, M (a tiny ball of bat guano and sulfur)

        **Duration:** Instantaneous

        A bright streak flashes from your pointing finger to a point you choose within range and then blossoms with a low roar into an explosion of flame. Each creature in a 20-foot-radius sphere centered on that point must make a Dexterity saving throw. A target takes 8d6 fire damage on a failed save, or half as much damage on a successful one.

        The fire spreads around corners. It ignites flammable objects in the area that arenâ€™t being worn or carried.

        ***At Higher Levels.*** When you cast this spell using a spell slot of 4th level or higher, the damage increases by 1d6 for each slot level above 3rd.
    `,
          'test.yml': `
            title: "This is a test"
            img: "temple.png"
            description: "Just a small test to check if cards work with yaml"
          `
        }

        return new Promise((resolve) => {
          resolve(importables[path]);
        });
      }
    </script>
  </body>
</html>
