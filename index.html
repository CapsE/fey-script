<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="water-dark.css">


    <title>Vite App</title>
  </head>
  <body>
    <div id="app">

      <fey-viewer id="viewer">
        ---
        info: Use "front-matter" to supply initial data to your document
        name: Nira
        str: 10
        dex: 15
        con: 8
        int: 10
        wis: 14
        cha: 12
        ---
        # Fey-Script
        Fey-Script is a superset of the markdown syntax that enhances it by adding interactive elements, import and export logic,
        structual elements to handle document flow and much more.

        ## Markdown
        Use the well known markdown syntax to style your text, add tables and images and much more.

        ## Structual Elements
        You can wrap your markdown syntax in different containers to change how they are displayed.

        ### Row
        The row will display contained elements next to each other with a bit of spacing and break automatically
        into the next row if no more space is available.

        :::row
        [[
          ### First Card
          This card contains some test text.
        ]]
        [[
          ### Second Card
          This card contains some test text.
        ]]
        :::

        ### Grid
        Using the grid container you can define columns with relative sizes. In this example a grid of 1-2-1 is used
        which means the center column is twice as wide as the outer ones. You can use as many columns as you like so
        1-1-1-1-1-1-1 would give you seven columns of equal size.

        :::grid-1-2-1
        <div style="background-color: darkcyan; padding: 1rem">

        </div>
        <div style="background-color: darkblue; padding: 1rem">

        </div>
        <div style="background-color: darkmagenta; padding: 1rem">

        </div>
        :::

        ## Interactive Elements
        You can use inputs and variables to control the rendering of your document. Using double curly brackets
        you can output any value within the document.

        __Name:__ {{name}}

        ### Inputs
        Inputs are defined by writing "i" followed by a variable name in square brackets. They allow you to edit
        variables on the fly and the document will react to the changes.

        i[name|{"type":"text"}]

        ### Selects
        Selects work just like inputs but give the user a list of available values to choose from instead

        s[className][
        Warrior
        Rogue
        Mage
        ]

        ### Conditional Block
        It's possible to wrap parts of your document in a conditional if block. The wrapped content will only be shown
        when the condition is met.

        :::if className === "Warrior"
        You choose the Warrior class. You are strong and know how to fight.
        :::

        :::if className === "Rogue"
        You choose the Rogue class. You are sneaky and know how to get out of sticky situations.
        :::

        :::if className === "Mage"
        You choose the Mage class. You are intelligent and know how to cast magic
        :::

        ### Dice Notation
        When writing text it'll be scanned for dice notation like +5, 2d6+2 or 1d4. Text like this will be highlighted
        like a link and can be clicked to generate dice results for the given notation.

        ### DnD Stats
        Fey-Script comes with a shortcut to calculate DnD attribute modifiers. You'd be able to calculate them just fine
        using the curly brackets but your document would get quite long. Write $mod and pass a variable name in round brackets
        to calculate the DnD Modifier.

        |                |               |               |               |               |               |
        |----------------|---------------|---------------|---------------|---------------|---------------|
        | i[str]         | i[dex]        | i[con]        | i[int]        | i[wis]        | i[cha]        |
        | {{$mod(str)}}  | {{$mod(dex)}} | {{$mod(con)}} | {{$mod(int)}} | {{$mod(wis)}} | {{$mod(cha)}} |



        ## Tabs
        Tabs are a great way to group information and hide things that rarely come into play away from the spotlight
        while still having it accessible.

        |-- Tab One ---
        |
        | Tabs are great! I want to see this information most of the time!
        |
        |-- Tab Two ---
        |
        | But sometimes this information is required so I just switch over here.
        |
        |---

        ## Imports
        You can import Fey-Script files into your document a few different ways. Using curly brackets and the ">" sign
        will import the content of the given file and insert it straight into your document.
        If you're using square brackets instead, you'll create a card that will display the first headline of the imported
        file as title, the first image as an image and look for the key "description" in the frontmatter data to display
        it on the card.

        {{> text }}

        [[> fireball ]]

      </fey-viewer>
    </div>
    <script type="module" src="/src/main.js"></script>
    <script>
      import('/src/importables/importables.js').then((module) => {
        const importables = module.importables;
        const viewer = document.getElementById('viewer');
        viewer.resolveImports = resolveImport;
        viewer.addEventListener('onDiceRoll', (e) => {
          alert(e.detail.result.output);
        });

        function resolveImport(path) {
          return new Promise((resolve) => {
            resolve(importables[path]);
          });
        }
      });
    </script>
  </body>
</html>
